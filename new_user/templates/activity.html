<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>活动详情</title>
    <script type="text/javascript">
            let isCommitted = false;//表单是否已经提交标识，默认为false
            function dosubmit(){
              if(isCommitted===false){
                isCommitted = true;//提交表单后，将表单是否已经提交标识设置为true
                return true;//返回true让表单正常提交
             }else{
                 return false;//返回false那么表单将不提交
             }
         }
        </script>
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
    <link rel="stylesheet" href="../../templates/init.css" type="text/css">
    <link rel="stylesheet" href="../../templates/base.css" type="text/css">
    <link rel="stylesheet" href="../../templates/header_index_activity.css" type="text/css">
    <link rel="stylesheet" href="./activity.css" type="text/css">
    <script src="../../templates/jquery-3.5.1.min.js"></script>
    <script src="../signUpForActivity.js"></script>

</head>

    <body>
   <header id="top"> <!-- 内容显示区域 ：width : 1211px -->
        <div id="top_box">
            <ul>
                {% if username %}
                <li><span><i class="iconfont">&#xe630;</i> 用户: <em id="username">{{ username }}</em></span></li>
              <li><a href="{% url 'logout' %}">退出登录</a></li>
          {% else %}
            <ul>
                <li><a href="{% url 'login' %}">登录</a></li>
                <li><a href="{% url 'register' %}">注册</a></li>
                {% endif %}
            </ul>
        </div>
   </header>

   <nav>
       <section>
       <!--   已有 <span>10</span> 人报名， <span>3</span> 人替补，已满员可报名替补。-->
       <div>已有 <span>10</span> 人报名，余 <span>2</span> 个名额，满员后仅可替补。</div>
      {% csrf_token %}
           <button id="signUpForActivity">
           {% if not is_join and not is_full %}
           <input type="hidden" name='join' value="join">
           报名
           {% elif is_join %}
           <input type="hidden" name='cancel' value="cancel">
           取消报名
           {% elif not is_join and is_full and not is_substitution %}
           <input type="hidden" name='substitution' value="substitution">
           报名替补
           {% elif is_substitution %}
           <input type="hidden" name='cancel_substitution' value="cancel_substitution">
          取消替补
           {% endif %}

       </button>
       </section>
   </nav>
  <main>
       <div class="tab">
           <h3>活动详情</h3>
           <p>
               <span><i class="iconfont">&#xe67d;</i> {{ i.activity_start_time}}</span>
               <span><i class="iconfont" >&#xe609;</i> {{ i.activity_place}}</span>
           </p>
       </div>
       <div class="persons">
           <ul>
           {% for key, value in new_join_dic.items %}
               <li>
                   <span>{{ key }}</span>
                   <span>{{ value }}</span>
               </li>
           {% endfor %}
           </ul>
       </div>
                  {% if txt %}<div>{{ txt }}</div>{% endif %}
  </main>
    </body>
</html>